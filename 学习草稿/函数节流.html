<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>

	<body style="height: 2000px;">
		<script type="text/javascript">
			function throttle(fn, delay) {
				console.log(this)//window
				// 记录上一次函数触发的时间
				var lastTime = 0;
				return function() {
					// 记录当前函数触发的时间
					var nowTime = Date.now();
					if(nowTime - lastTime > delay) {
					 /*
					  	fn();
						console.log(this)//document
					*/
						
						fn.apply(this)// 修正this指向问题
						console.log(this)//document
						
						
						// 同步时间
						lastTime = nowTime;
					}
				}
			}
			document.onscroll = throttle(function() {
				/*console.log(this)//window*/
				console.log(this)//document
				console.log('scroll事件被触发了' + Date.now())
			}, 1000)
		</script>
	</body>

</html>